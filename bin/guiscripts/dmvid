#!/usr/bin/env sh

find ${1:-~/vids ~/dl} 2> /dev/null |
	grep ".\+\.\(webm\|mp4\|mpeg\|mkv\)$" |
	sort > /tmp/dmvids

choice="$(sed 's|^/home/aluc|\~| ; s|\([^/]\)[^/]*/|\1/|g' /tmp/dmvids | 
	awk '{printf "%s %s\n", NR ":", $0}' | 
	dmenu -l 10 -g 1 -x -i | 
	cut -f 1 -d ':')"
test -z "$choice" &&
	exit 1

mpv "$(sed -n "${choice}p" /tmp/dmvids)"
