#!/bin/sh

inp="$1"
[ -z "$inp" ] && inp="$(ytlink)"
[ "$inp" ] || exit 1
>&2 printf "inp: %s\n" "$inp"
notify-send "ytclipo" "$inp" || :

yt-dlp "$inp" \
	--restrict-filenames \
	--embed-chapters \
	-S "res:1080" \
	-P "$HOME/vids/youtube/" \
	-o "%(channel)s/%(title)s.%(ext)s"
notify-send "ytclipo" "finished downloading." || :
